//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  openID String [unique, not null]
  email String [not null]
  picURL String
  createdAt DateTime [default: `now()`, not null]
  firstName String [not null]
  lastName String [not null]
  middleName String
  dob DateTime [default: `now()`]
  isAdmin Boolean [not null, default: false]
  isActive Boolean [not null, default: false]
  social Social
  plan PlanOfStudy
  tokens Token [not null]
  feedback ModuleFeedback [not null]
  assignmentGraded AssignmentResult [not null]
  instructorProfile InstructorProfile
  watchedThreads Thread [not null]
  watchedThreadIDs String[] [not null]
  createdThreads Thread [not null]
}

Table InstructorProfile {
  id String [pk]
  account User
  accountID String [unique]
  title String
  officeLocation String
  officeHours String
  contactPolicy String
  phone String
  background String
  researchInterest String
  selectedPapersAndPublications String
  personalWebsite String
  philosophy String
}

Table PlanOfStudy {
  id String [pk]
  student User
  studentID String [unique]
  modules ModuleEnrollment [not null]
  assignmentResults AssignmentResult [not null]
}

Table Social {
  id String [pk]
  twitter String
  github String
  linkedin String
  facebook String
  portfolio String
  account User
  accountID String [unique]
}

Table Token {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  valid Boolean [not null, default: true]
  expiration DateTime [not null]
  user User [not null]
  userId String [not null]
}

Table Course {
  id String [pk]
  name String [not null]
  moduleIDs String[] [not null]
  module Module [not null]
}

Table Module {
  id String [pk]
  moduleNumber Int [unique, not null]
  moduleName String [unique, not null]
  description String [not null]
  duration Float [not null]
  intro String [not null]
  numSlides Int [not null]
  keywords String[] [not null]
  objectives String[] [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  members ModuleEnrollment [not null]
  assignments Assignment [not null]
  feedback ModuleFeedback [not null]
  parentModules Module [not null]
  parentModuleIDs String[] [not null]
  subModules Module [not null]
  subModuleIDs String[] [not null]
  collections Collection [not null]
  courseIDs String[] [not null]
  course Course [not null]
}

Table Collection {
  id String [pk]
  name String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  position Int [not null, default: 0]
  lessons Lesson [not null]
  module Module [not null]
  moduleID String [not null]
}

Table Lesson {
  id String [pk]
  name String [not null]
  transcript String
  threads Thread [not null]
  collection Collection
  collectionID String
  position Int [not null, default: 0]
  content Content [not null]
}

Table ModuleFeedback {
  id String [pk]
  feedback String [not null]
  rating Int [not null]
  studentId String [not null]
  moduleId String [not null]
  student User [not null]
  module Module [not null]
}

Table ModuleEnrollment {
  id String [pk]
  enrolledAt DateTime [default: `now()`, not null]
  role UserRole [not null]
  status EnrollmentStatus [not null, default: 'INACTIVE']
  module Module [not null]
  moduleId String [not null]
  plan PlanOfStudy
  planID String
  progress Progress
}

Table Assignment {
  id String [pk]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  dueAt DateTime [not null]
  moduleId String [not null]
  module Module [not null]
  assignmentResults AssignmentResult [not null]
}

Table AssignmentResult {
  id String [pk]
  submittedAt DateTime [default: `now()`, not null]
  result Float [not null]
  feedback String
  studentId String [not null]
  student PlanOfStudy [not null]
  graderId String [not null]
  gradedBy User [not null]
  assignmentId String [not null]
  assignment Assignment [not null]
}

Table Thread {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  title String
  body String [not null]
  usersWatching User [not null]
  watcherID String[] [not null]
  author User [not null]
  authorID String [not null]
  upvotes Int [not null, default: 0]
  parentLesson Lesson
  parentLessonID String
  parentThread Thread
  parentThreadID String
  comments Thread [not null]
}

Table Content {
  id String [pk]
  type String [not null]
  link String [not null]
  parent Lesson [not null]
  parentID String [not null]
}

Table Progress {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  status Float [not null, default: 0]
  completed Boolean [not null, default: false]
  enrollment ModuleEnrollment [not null]
  enrollmentID String [unique, not null]
}

Enum UserRole {
  STUDENT
  TEACHER
  GRADER
}

Enum EnrollmentStatus {
  ACTIVE
  INACTIVE
}

Ref: User.watchedThreadIDs > Thread.id

Ref: InstructorProfile.accountID - User.id

Ref: PlanOfStudy.studentID - User.id

Ref: Social.accountID - User.id

Ref: Token.userId > User.id

Ref: Course.moduleIDs > Module.id

Ref: Module.parentModuleIDs > Module.id

Ref: Module.subModuleIDs > Module.id

Ref: Module.courseIDs > Course.id

Ref: Collection.moduleID > Module.id [delete: Cascade]

Ref: Lesson.collectionID > Collection.id [delete: Cascade]

Ref: ModuleFeedback.studentId > User.id

Ref: ModuleFeedback.moduleId > Module.id

Ref: ModuleEnrollment.moduleId > Module.id

Ref: ModuleEnrollment.planID > PlanOfStudy.id

Ref: Assignment.moduleId > Module.id

Ref: AssignmentResult.studentId > PlanOfStudy.id

Ref: AssignmentResult.graderId > User.id

Ref: AssignmentResult.assignmentId > Assignment.id

Ref: Thread.watcherID > User.id

Ref: Thread.authorID > User.id

Ref: Thread.parentLessonID > Lesson.id

Ref: Thread.parentThreadID - Thread.id [delete: No Action]

Ref: Content.parentID > Lesson.id

Ref: Progress.enrollmentID - ModuleEnrollment.id