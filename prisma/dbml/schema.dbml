//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  openID String [unique, not null]
  email String [not null]
  picURL String
  createdAt DateTime [default: `now()`, not null]
  firstName String [not null]
  lastName String [not null]
  middleName String
  dob DateTime [default: `now()`]
  isAdmin Boolean [not null, default: false]
  isActive Boolean [not null, default: false]
  biography String
  phoneNumber String
  social Social
  plan PlanOfStudy
  tokens Token [not null]
  feedback SectionFeedback [not null]
  assignmentGraded AssignmentResult [not null]
  instructorProfile InstructorProfile
  watchedThreads Thread [not null]
  watchedThreadIDs String[] [not null]
  createdThreads Thread [not null]
  sentMessages DirectMessage [not null]
  receivedMessages DirectMessage [not null]
  groupMemeberships Group [not null]
  groupMembershipIDs String[] [not null]
  upvotedThreads Thread [not null]
  upvotedThreadIDs String[] [not null]
}

Table InstructorProfile {
  id String [pk]
  account User
  accountID String [unique]
  title String
  officeLocation String
  officeHours String[] [not null]
  contactPolicy String
  background String
  researchInterest String[] [not null]
  selectedPapersAndPublications String[] [not null]
  instructedModules Module [not null]
}

Table PlanOfStudy {
  id String [pk]
  student User
  studentID String [unique]
  sections SectionEnrollment [not null]
  assignmentResults AssignmentResult [not null]
  quizResults QuizResult [not null]
  learningPaths LearningPath [not null]
}

Table Social {
  id String [pk]
  twitter String
  github String
  linkedin String
  facebook String
  portfolio String
  account User
  accountID String [unique]
}

Table Token {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  valid Boolean [not null, default: true]
  expiration DateTime [not null]
  user User [not null]
  userId String [not null]
}

Table Course {
  id String [pk]
  name String [not null]
  number Int [default: 0]
  prefix String [default: '']
  required Boolean [default: false]
  carnegieHours Int [default: 135]
  sectionIDs String[] [not null]
  sections Section [not null]
}

Table Section {
  id String [pk]
  sectionNumber Int [unique, not null]
  sectionName String [unique, not null]
  description String [not null]
  duration Float [not null]
  intro String [not null]
  numSlides Int [not null]
  keywords String[] [not null]
  objectives String[] [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  members SectionEnrollment [not null]
  assignments Assignment [not null]
  feedback SectionFeedback [not null]
  parentSections Section [not null]
  parentSectionIDs String[] [not null]
  subSections Section [not null]
  subSectionIDs String[] [not null]
  collections Collection [not null]
  courseIDs String[] [not null]
  course Course [not null]
}

Table Collection {
  id String [pk]
  name String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  position Int [not null, default: 0]
  modules Module [not null]
  moduleIDs String[] [not null]
  section Section [not null]
  sectionID String [not null]
}

Table Module {
  id String [pk]
  name String [not null]
  prefix String [default: '']
  number Int [default: 1]
  collections Collection [not null]
  collectionIDs String[] [not null]
  position Int [not null, default: 0]
  objectives String[] [not null]
  hours Float [not null, default: 0]
  description String [default: '']
  instructor InstructorProfile
  instructorProfileID String [default: '']
  content Content [not null]
  quizzes Quiz [not null]
  moduleProgress ModuleProgress [not null]
}

Table SectionFeedback {
  id String [pk]
  feedback String [not null]
  rating Int [not null]
  studentId String [not null]
  sectionId String [not null]
  student User [not null]
  section Section [not null]
}

Table SectionEnrollment {
  id String [pk]
  enrolledAt DateTime [default: `now()`, not null]
  role UserRole [not null]
  status EnrollmentStatus [not null, default: 'INACTIVE']
  section Section [not null]
  sectionId String [not null]
  plan PlanOfStudy
  planID String
  progress Progress
  moduleProgress ModuleProgress [not null]
}

Table Assignment {
  id String [pk]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  dueAt DateTime [not null]
  contentURL String [not null]
  contentType String [not null]
  acceptedTypes FileType [not null, default: 'DOC']
  sectionId String [not null]
  section Section [not null]
  assignmentResults AssignmentResult [not null]
}

Table AssignmentResult {
  id String [pk]
  submittedAt DateTime [default: `now()`, not null]
  result Float [not null]
  feedback String
  submissionURL String [not null]
  fileType String [not null]
  studentId String [not null]
  student PlanOfStudy [not null]
  graderId String [not null]
  gradedBy User [not null]
  assignmentId String [not null]
  assignment Assignment [not null]
}

Table Thread {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  title String
  body String [not null]
  usersWatching User [not null]
  watcherID String[] [not null]
  author User [not null]
  authorID String [not null]
  topics String[] [not null]
  parentThread Thread
  parentThreadID String
  comments Thread [not null]
  upvotes User [not null]
  upvoteUserIDs String[] [not null]
}

Table Content {
  id String [pk]
  type ContentType [not null]
  link String [not null]
  parent Module [not null]
  parentID String [not null]
  primary Boolean [not null]
}

Table DirectMessage {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  body String [not null]
  author User [not null]
  authorID String [not null]
  recipient User
  recipientID String
  group Group
  groupID String
}

Table Group {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  public Boolean [not null, default: false]
  members User [not null]
  memberIDs String[] [not null]
  messages DirectMessage [not null]
}

Table Progress {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  status Float [not null, default: 0]
  completed Boolean [not null, default: false]
  enrollment SectionEnrollment [not null]
  enrollmentID String [unique, not null]
}

Table ModuleProgress {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  status Float [not null, default: 0]
  completed Boolean [not null, default: false]
  module Module [not null]
  moduleID String [not null]
  enrollment SectionEnrollment [not null]
  enrollmentID String [unique, not null]
}

Table Quiz {
  id String [pk]
  totalPoints Float [not null]
  instructions String
  dueAt DateTime
  timeLimit Int
  numQuestions Int [not null]
  minScore Float [not null, default: 0]
  parentModule Module [not null]
  parentModuleID String [not null]
  questionPool Question [not null]
  instances QuizInstance [not null]
}

Table QuizInstance {
  id String [pk]
  quiz Quiz [not null]
  quizID String [not null]
  questions Question [not null]
  questionIDs String[] [not null]
  quizResult QuizResult [not null]
}

Table Question {
  id String [pk]
  number Int [not null]
  variant Int [not null, default: 1]
  text String [not null]
  points Float [not null, default: 1]
  answers Answer [not null]
  parent Quiz [not null]
  parentID String [not null]
  instances QuizInstance [not null]
  instanceIDs String[] [not null]
}

Table Answer {
  id String [pk]
  text String [not null]
  correct Boolean [not null]
  weight Float
  index String
  parentQuestion Question [not null]
  parentQuestionID String [not null]
}

Table QuizResult {
  id String [pk]
  score Float [not null]
  submittedAt DateTime [default: `now()`, not null]
  student PlanOfStudy [not null]
  studentID String [not null]
  quizInstance QuizInstance
  quizInstanceID String
}

Table LearningPath {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  plan PlanOfStudy [not null]
  planID String [unique, not null]
  paths Path[] [not null]
}

Enum UserRole {
  STUDENT
  TEACHER
  GRADER
}

Enum EnrollmentStatus {
  ACTIVE
  INACTIVE
}

Enum ContentType {
  PDF
  DOC
  DOCX
  VIDEO
  CAPTION
  TRANSCRIPT
  QUIZ
  TEXT
}

Enum FileType {
  DOCX
  DOC
  PDF
  TTT
  TXT
}

Enum PathStatus {
  DRAFT
  LIVE
}

Ref: User.watchedThreadIDs > Thread.id

Ref: User.groupMembershipIDs > Group.id

Ref: User.upvotedThreadIDs > Thread.id

Ref: InstructorProfile.accountID - User.id

Ref: PlanOfStudy.studentID - User.id

Ref: Social.accountID - User.id

Ref: Token.userId > User.id

Ref: Course.sectionIDs > Section.id

Ref: Section.parentSectionIDs > Section.id

Ref: Section.subSectionIDs > Section.id

Ref: Section.courseIDs > Course.id

Ref: Collection.moduleIDs > Module.id

Ref: Collection.sectionID > Section.id [delete: Cascade]

Ref: Module.collectionIDs > Collection.id

Ref: Module.instructorProfileID > InstructorProfile.id

Ref: SectionFeedback.studentId > User.id

Ref: SectionFeedback.sectionId > Section.id

Ref: SectionEnrollment.sectionId > Section.id

Ref: SectionEnrollment.planID > PlanOfStudy.id

Ref: Assignment.sectionId > Section.id

Ref: AssignmentResult.studentId > PlanOfStudy.id

Ref: AssignmentResult.graderId > User.id

Ref: AssignmentResult.assignmentId > Assignment.id

Ref: Thread.watcherID > User.id

Ref: Thread.authorID > User.id

Ref: Thread.parentThreadID - Thread.id [delete: No Action]

Ref: Thread.upvoteUserIDs > User.id

Ref: Content.parentID > Module.id [delete: Cascade]

Ref: DirectMessage.authorID > User.id

Ref: DirectMessage.recipientID > User.id

Ref: DirectMessage.groupID > Group.id

Ref: Group.memberIDs > User.id

Ref: Progress.enrollmentID - SectionEnrollment.id [delete: Cascade]

Ref: ModuleProgress.moduleID > Module.id [delete: Cascade]

Ref: ModuleProgress.enrollmentID > SectionEnrollment.id [delete: Cascade]

Ref: Quiz.parentModuleID > Module.id [delete: Cascade]

Ref: QuizInstance.quizID > Quiz.id [delete: Cascade]

Ref: QuizInstance.questionIDs > Question.id

Ref: Question.parentID > Quiz.id [delete: Cascade]

Ref: Question.instanceIDs > QuizInstance.id

Ref: Answer.parentQuestionID > Question.id [delete: Cascade]

Ref: QuizResult.studentID > PlanOfStudy.id

Ref: QuizResult.quizInstanceID > QuizInstance.id

Ref: LearningPath.planID > PlanOfStudy.id [delete: Cascade]